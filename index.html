<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Teste de Localização</title>
</head>
<body>
  <h2>Teste de Envio da Localização</h2>
  <button onclick="enviar()">Enviar Localização</button>
  <p id="status"></p>

  <script>
    async function enviar() {
      const status = document.getElementById("status");
      if (!navigator.geolocation) {
        status.textContent = "Não suporta geolocalização.";
        return;
      }
      status.textContent = "Obtendo localização…";

      navigator.geolocation.getCurrentPosition(async (pos) => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        status.textContent = `Enviando lat=${lat}, lon=${lon}…`;

        const url = "https://script.google.com/macros/s/AKfycbwk5F09_2ajt_z2a054KA369U7s33QNwLiTu1AO06KbvU4mRUgQixX-yICwbMzYLxHF/exec";
        const payload = { latitude: lat, longitude: lon };
        try {
          const resp = await fetch(url, {
            method: "POST",
            body: JSON.stringify(payload)
          });
          const text = await resp.text();
          console.log("Resposta:", text);
          status.textContent = "Enviado com sucesso!";
        } catch (err) {
          console.error(err);
          status.textContent = "Erro ao enviar localização.";
        }

      }, (err) => {
        status.textContent = "Erro ao obter localização: " + err.message;
      });
    }
  </script>
</body>
</html>
